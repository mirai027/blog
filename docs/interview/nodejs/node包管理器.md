# nodeåŒ…ç®¡ç†å™¨

> npmæ˜¯[Node.js](http://nodejs.org/)çš„è½¯ä»¶åŒ…ç®¡ç†å™¨ ã€‚å®ƒåˆ›å»ºäº2009å¹´ï¼Œæ˜¯ä¸€ä¸ª [å¼€æºé¡¹ç›®ï¼Œ ](https://github.com/npm/npm)æ—¨åœ¨å¸®åŠ©JavaScriptå¼€å‘äººå‘˜è½»æ¾å…±äº«æ‰“åŒ…çš„ä»£ç æ¨¡å—ã€‚

æ—¢ç„¶æ˜¯ç»å¸¸ç”¨çš„ï¼Œé‚£ä¹Ÿæ•´ç†æ•´ç†ğŸ‘¾ï¼ˆåªåˆ—å‡ºå¸¸ç”¨çš„å‘½ä»¤ï¼‰ã€‚



## npm

> å®˜æ–¹æŒ‡è·¯ï¼š[https://docs.npmjs.com/about-semantic-versioning](https://docs.npmjs.com/about-semantic-versioning)

æŒ‰å®˜æ–¹æ¥è®²ï¼Œç‰ˆæœ¬å·åº”è¯¥æ˜¯ï¼š**ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·**

| ä»£ç çŠ¶æ€             | é˜¶æ®µ     | è§„åˆ™                                 | ç¤ºä¾‹ç‰ˆæœ¬ |
| -------------------- | -------- | ------------------------------------ | -------- |
| åˆç‰ˆ                 | æ–°äº§å“   | ä»1.0.0å¼€å§‹                          | 1.0.0    |
| å‘åå…¼å®¹çš„é”™è¯¯ä¿®å¤   | è¡¥ä¸å‘å¸ƒ | é€’å¢ç¬¬ä¸‰ä½æ•°                         | 1.0.1    |
| å‘åå…¼å®¹çš„æ–°åŠŸèƒ½     | è½»å¾®é‡Šæ”¾ | é€’å¢ä¸­é—´æ•°å­—å¹¶å°†æœ€åä¸€ä½é‡ç½®ä¸ºé›¶     | 1.1.0    |
| æ›´æ”¹ä¼šç ´åå‘åå…¼å®¹æ€§ | ä¸»è¦å‘è¡Œ | é€’å¢ç¬¬ä¸€ä½å¹¶å°†ä¸­é—´å’Œæœ€åä¸€ä½é‡ç½®ä¸ºé›¶ | 2.0.0    |



### å¸¸è§çš„ç‰ˆæœ¬æ ¼å¼

> å®˜æ–¹æŒ‡è·¯ï¼š[https://semver.npmjs.com/](https://semver.npmjs.com/)



**"1.2.3"**

è¡¨ç¤ºç²¾ç¡®ç‰ˆæœ¬å·ã€‚åªåŒ¹é…`1.2.3`çš„ç‰ˆæœ¬



**"^1.2.3"**

> åœ¨ç›¸åŒçš„ä¸»è¦èŒƒå›´å†…åŒ…å«æ¯”ç‰¹å®šç‰ˆæœ¬æ›´å¤§çš„æ‰€æœ‰å†…å®¹

**ä¸»ç‰ˆæœ¬å·** ä¸ç­‰äº **0**æ—¶ï¼ŒåŒ¹é… **å½“å‰ç‰ˆæœ¬å·** åˆ°è¯¥ **ä¸»ç‰ˆæœ¬å·** çš„æœ€å¤§çš„ç‰ˆæœ¬

<strong>*ä¸»ç‰ˆæœ¬å·*</strong> ç­‰äº **0**ï¼Œ**æ¬¡ç‰ˆæœ¬å·** ä¸ç­‰äº **0** æ—¶ï¼ŒåŒ¹é… **å½“å‰ç‰ˆæœ¬å·** åˆ°è¯¥ **æ¬¡ç‰ˆæœ¬å·** çš„æœ€å¤§çš„ç‰ˆæœ¬

<strong>*ä¸»ç‰ˆæœ¬å·*</strong> ç­‰äº**0**ï¼Œ*<strong>æ¬¡ç‰ˆæœ¬å·</strong>* ç­‰äº **0**ï¼Œ**ä¿®è®¢å·** ä¸ç­‰äº **0** æ—¶ï¼ŒåŒ¹é… **å½“å‰ç‰ˆæœ¬å·** åˆ°è¯¥ **ä¿®è®¢å·** çš„æœ€å¤§çš„ç‰ˆæœ¬

```bash
"^1.2.3" åŒ¹é… ">= 1.2.3 < 2.0.0"

"^0.2.3" åŒ¹é… ">= 0.2.3 < 0.3.0"

"^0.0.3" åŒ¹é… ">= 0.0.3 < 0.0.4"
```



**"~1.2.3"**

> åœ¨åŒä¸€è¾ƒå°èŒƒå›´å†…åŒ…å«å¤§äºç‰¹å®šç‰ˆæœ¬çš„æ‰€æœ‰å†…å®¹

æœ‰ **ä¿®è®¢å·** æ—¶ï¼ŒåŒ¹é… **å½“å‰ç‰ˆæœ¬å·** åˆ°è¯¥ **ä¿®è®¢å·** æœ€å¤§ç‰ˆæœ¬

æ²¡æœ‰ <strong>*ä¿®è®¢å·*</strong>ï¼Œæœ‰ **æ¬¡ç‰ˆæœ¬å·** æ—¶ï¼ŒåŒ¹é… **å½“å‰ç‰ˆæœ¬å·** åˆ°è¯¥ **æ¬¡ç‰ˆæœ¬å·** æœ€å¤§ç‰ˆæœ¬

æ²¡æœ‰ <strong>*ä¿®è®¢å·*</strong>ï¼Œæ²¡æœ‰ <strong>*æ¬¡ç‰ˆæœ¬å·*</strong>ï¼Œæœ‰ **ä¸»ç‰ˆæœ¬å·** æ—¶ï¼ŒåŒ¹é… **å½“å‰ç‰ˆæœ¬å·** åˆ°è¯¥ **ä¸»ç‰ˆæœ¬å·** æœ€å¤§ç‰ˆæœ¬

```bash
"~1.2.3" åŒ¹é… ">= 1.2.3 < 1.3.0"

"~1.2" åŒ¹é… ">= 1.2.0 < 1.3.0"

"~1" åŒ¹é… ">= 1.0.0 < 2.0.0
```



### dependencies - ç”Ÿäº§ä¾èµ–

ä¼—æ‰€å‘¨çŸ¥ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦çš„ä¸œè¥¿ï¼Œä½ éƒ½éœ€è¦è£…åœ¨è¿™ä¸ªé€‰é¡¹é‡Œä¾›ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚ä¾‹å¦‚ï¼š`vue`ã€`vue-router`ã€`vuex`

> å®˜æ–¹æŒ‡è·¯ï¼š[https://docs.npmjs.com/cli/install](https://docs.npmjs.com/cli/install)

**å®‰è£…**

> `-P, --save-prod`ï¼šåŒ…è£¹å°†å‡ºç°åœ¨æ‚¨çš„ä¸­`dependencies`ã€‚è¿™æ˜¯é»˜è®¤è®¾ç½®ï¼Œé™¤é`-D`æˆ–`-O`å­˜åœ¨ã€‚

```bash
npm install/i <package_name> // æ—¢ç„¶æ˜¯é»˜è®¤ï¼Œé‚£å°±æ²¡å¿…è¦åŠ å‚æ•°äº†
// ç­‰ä»·äº
npm i <package_name>
```

**å¸è½½**

> `-D, --save-dev`ï¼šåŒ…è£¹å°†å‡ºç°åœ¨æ‚¨çš„ä¸­`devDependencies`ã€‚

```bash
npm uninstall <package_name>
// ç­‰ä»·äº
npm uni <package_name>
```



### devDependencies - å¼€å‘ä¾èµ–

> å®˜æ–¹æŒ‡è·¯ï¼š[https://docs.npmjs.com/cli/install](https://docs.npmjs.com/cli/install)

ä¼—æ‰€å‘¨çŸ¥ï¼Œåªæ˜¯å¼€å‘ç¯å¢ƒéœ€è¦çš„ä¸œè¥¿ï¼Œä½ éƒ½åº”è¯¥è£…åœ¨è¿™ä¸ªé€‰é¡¹é‡Œåªä¾›å¼€å‘ç¯å¢ƒä½¿ç”¨ã€‚ä¾‹å¦‚ï¼š`eslint`ã€`sass`

**å®‰è£…**

```bash
npm install <package_name> --save-dev
// ç­‰ä»·äº
npm install <package_name> -D
```

**å¸è½½**

```bash
npm uninstall <package_name> --save-dev
// ç­‰ä»·äº
npm uni <package_name> -D
```

ä¹Ÿè®¸`npm`èµ°çš„å›½å¤–æœåŠ¡å™¨ï¼Œæ—¶ä¸æ—¶ä¼šæŠ½æŠ½é£ä¸‹ä¸åŠ¨ã€‚é‚£å¯ä»¥å‚æ•°ä¸€ä¸‹æ·˜å®çš„`cnpm`...ğŸ‘‡



## cnpm

> å®˜æ–¹æŒ‡è·¯ï¼š[æ·˜å® NPM é•œåƒ](https://developer.aliyun.com/mirror/NPM)
>
> è¿™æ˜¯ä¸€ä¸ªå®Œæ•´ `npmjs.org` é•œåƒï¼Œä½ å¯ä»¥ç”¨æ­¤ä»£æ›¿å®˜æ–¹ç‰ˆæœ¬(åªè¯»)ï¼ŒåŒæ­¥é¢‘ç‡ç›®å‰ä¸º **10åˆ†é’Ÿ** ä¸€æ¬¡ä»¥ä¿è¯å°½é‡ä¸å®˜æ–¹æœåŠ¡åŒæ­¥ã€‚

### å®‰è£…/æ¢æº

```bash
npm install -g cnpm --registry=https://registry.npm.taobao.org
```

ç”¨æ³•åŒä¸Šï¼Œä½†`cnpm install <package_name>`çš„æ—¶å€™ï¼Œé»˜è®¤ä¸ä¼šæ·»åŠ è¿›`dependencies - ç”Ÿäº§ä¾èµ–`ã€‚éœ€è¦ä½¿ç”¨`cnpm install <package_name> -S`

ä¸ºä»€ä¹ˆæ˜¯`-S`ä¸æ˜¯`-P`ï¼Ÿæˆ‘ä¹Ÿä¸çŸ¥é“ğŸ™„ã€‚



ä¹Ÿè®¸ä½ æ—¶å¸¸èƒ½å¬åˆ°ï¼Œç”¨`cnpm`çš„æ—¶å€™åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå‡º bugï¼ˆä½œè€…è¿˜æ²¡é‡åˆ°è¿‡ï¼‰ã€‚æ—¢ç„¶æœ‰å¯èƒ½ï¼Œé‚£å°±è¯•è¯•`yarn`...ğŸ‘‡



## yarn

> Yarnæ˜¯æ‚¨çš„ä»£ç çš„åŒ…ç®¡ç†å™¨ã€‚å®ƒä½¿æ‚¨å¯ä»¥ä½¿ç”¨ä»£ç å¹¶ä¸ä¸–ç•Œå„åœ°çš„å…¶ä»–å¼€å‘äººå‘˜å…±äº«ä»£ç ã€‚Yarnå¿«é€Ÿï¼Œå®‰å…¨ä¸”å¯é åœ°æ‰§è¡Œæ­¤æ“ä½œï¼Œå› æ­¤æ‚¨ä¸å¿…æ‹…å¿ƒã€‚

åœ¨ä½ ä½¿ç”¨çš„æ—¶å€™ï¼Œä½ çœ‹ç€å®‰è£…/å¸è½½çš„è¿›åº¦æ¡ï¼Œä½ ä¼šæ„Ÿå—åˆ°ä»€ä¹ˆå«**çºµäº«ä¸æ»‘**ã€‚

ç”¨æ³•å®˜ç½‘å·²ç»å†™å¾—å¾ˆæ¸…æ¥šäº†ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´ã€‚



### å®‰è£…

> å®˜æ–¹æŒ‡è·¯ï¼š[https://yarnpkg.com/getting-started/install](https://yarnpkg.com/getting-started/install)

å…¨å±€å®‰è£…æ¥ä¸€æ‰‹

```js
npm install -g yarn
```



### è®¿é—®å‘½ä»¤åˆ—è¡¨

```bash
yarn help
```



### å¼€å§‹ä¸€ä¸ªæ–°é¡¹ç›®

```bash
yarn init
```



### å®‰è£…æ‰€æœ‰ä¾èµ–é¡¹

```bash
yarn
yarn install
```



### æ·»åŠ ä¾èµ–é¡¹

```bash
yarn add [package]
yarn add [package]@[version]
yarn add [package]@[tag]
```



### å°†ä¾èµ–é¡¹æ·»åŠ åˆ°ä¸åŒç±»åˆ«çš„ä¾èµ–é¡¹ä¸­

```bash
yarn add [package]  # dependencies
yarn add [package] -D # devDependencies
```



### å‡çº§ä¾èµ–

```bash
yarn up [package]
yarn up [package]@[version]
yarn up [package]@[tag]
```



### åˆ é™¤ä¾èµ–

```bash
yarn remove [package]
```



### å‡çº§yarn

```bash
yarn set version latest
yarn set version from sources
```



## æ€»ç»“

`npm`æŠ½é£çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨`yarn`ã€‚å½“ç„¶æœ€å¥½æ˜¯ä¸€ç›´éƒ½ç”¨`yarn`



### npmå¸¸ç”¨å‘½ä»¤

```bash
npm i  # å®‰è£…æ‰€æœ‰ä¾èµ–é¡¹
npm i <package_name>  # å®‰è£…åŒ… é»˜è®¤å®‰è£…åˆ° ç”Ÿäº§ç¯å¢ƒ dependenciesä¸­
npm uni <package_name>  # å¸è½½åŒ…
npm i <package_name> -D # å®‰è£…åŒ…åˆ° å¼€å‘ç¯å¢ƒ devDependenciesä¸­
```



### yarnå¸¸ç”¨å‘½ä»¤

```bash
yarn  # å®‰è£…æ‰€æœ‰ä¾èµ–é¡¹
yarn add <package_name>  # å®‰è£…åŒ… é»˜è®¤å®‰è£…åˆ° ç”Ÿäº§ç¯å¢ƒ dependenciesä¸­
yarn remove <package_name>  # å¸è½½åŒ…
yarn add <package_name> -D # å®‰è£…åŒ…åˆ° å¼€å‘ç¯å¢ƒ devDependenciesä¸­
```

